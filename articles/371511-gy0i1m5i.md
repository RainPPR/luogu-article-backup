---
title: 题解：P10320 勇气（Courage）
date: 1712322911
description:  形式化题面

给定 x0 和 n，x1x02，对于 i1 有：

xileftxi1over2right2

问最小的非负整数 k，使得 xkge2n。

 题
author: 371511
---

### 形式化题面

给定 $x_0$ 和 $n$，$x_1={x_0}^2$，对于 $i>1$ 有：
$$
x_i=\left({x_{i-1}\over2}\right)^2
$$
问最小的非负整数 $k$，使得 $x_k\ge2^n$。

### 题解

我们发现：
$$
\begin{aligned}
x_1&&&={x_0}^2\\
x_2&={{x_1}^2\over4}&&={{x_0}^4\over4}\\
x_3&={{x_2}^2\over4}&&={{x_0}^8\over4^3}\\
x_4&={{x_3}^2\over4}&&={{x_0}^{16}\over4^7}\\
\end{aligned}
$$
容易得出：
$$
x_i={{x_0}^{2^i}\over4^{2^{i-1}-1}}={{x_0}^{2^i}\over2^{2^i-2}}
$$
我们尝试直接带入不等式 $x_k\ge2^n$：
$$
\begin{aligned}
{{x_0}^{2^k}\over2^{2^k-2}}&\ge2^n\\
{x_0}^{2^k}&\ge2^{2^k-2+n}\\
\end{aligned}
$$
注意到两边都是正数，因此考虑两边同时取对数：
$$
\begin{aligned}
2^k\log_2x_0&\ge2^k-2+n\\
2^k(\log_2x_0-1)&\ge n-2
\end{aligned}
$$
注意到如果 $n=1$，那么等式一定成立，且 $k\ge0$​。

注意到如果 $n=2$，那么等式一定成立，且 $k\ge1$。

注意到如果 $x_0=2$，那么只有 $n=2$​，不等式成立。

否则，注意到两边都是正数，我们移项、取对数：
$$
\begin{aligned}
2^k&\ge{n-2\over\log_2x_0-1}\\
k&\ge\log_2\left({n-2\over\log_2x_0-1}\right)\\
k&\ge\log_2(n-2)-\log_2(\log_2x_0-1)
\end{aligned}
$$
然后上取整即可。

代码（Python3）：

```py
from math import log2, ceil
x, n = map(int, input().split())
if n == 1: print(0)
elif n == 2: print(1)
elif x == 2: print('inf')
else: print(ceil(log2(n - 2) - log2(log2(x) - 1)))
```
