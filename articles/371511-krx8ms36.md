---
title: AT_arc123_c 1, 2, 3 - Decomposition 题解
date: 1698472673
description: b'6Jm954S26aKY6Kej5Lmf5LiN5bCR5LqG77yM5L2G5piv5oiR5omT566X5YW35L2T6K+05LiA5LiL5Y6f5Zug77yI5oSf5oCn6K+B5piO44CCCgojIyDmgJ3ot68KCuaIkeS7rOWwhumimOebruS4reOAjOWNgei/m+WItuS4i+S7heWQq+aciSAkMSwyLDMkIOeahOato+aVtOaVsOOAjeensOS4uuOAjOWlveeahOaVsOWtl+OAjeOAggoK5YWI6ICD6JmR77yM5LiA5Liq5pWwICROJCDlpoLmnpzlj6/ku6XnlLHoi6XlubLkuKrlpb3nmoTmlbDlrZfnu4TmiJDvvIzpgqPkuYjlroPnmoTlvaLlvI/mmK/ku4DkuYjmoLflrZDnmoTjgIIKCjEuIOS4gOS4qu+8muavj+S4gOS9jemDveWPqg=='
author: 371511
---

虽然题解也不少了，但是我打算具体说一下原因（感性证明。

## 思路

我们将题目中「十进制下仅含有 $1,2,3$ 的正整数」称为「好的数字」。

先考虑，一个数 $N$ 如果可以由若干个好的数字组成，那么它的形式是什么样子的。

1. 一个：每一位都只能是 $[1,3]$；
2. 两个：每一位都只能是 $[2,6]$；
3. 三个：每一位都只能是 $[3,9]$。

接下来，注意到就可能会出现进位了！我们依旧分类讨论，从高位开始：

先讨论四个的情况：

4. 当前位是 $[4,9]$，那么**有可能**这一位没有产生进位；
5. 当前位是 $[0,2]$，那么**有可能**产生了进位，即 $\{^{2+2+3+3=10}_{3+3+3+3=12}$。

然后讨论五个的情况：

6. 当前位是 $[5,9]$，那么**有可能**没有产生进位；
7. 当前位是 $[0,5]$，那么**有可能**产生了进位，即 $\{^{2+2+2+2+2=10}_{3+3+3+3+3=15}$。

然后我们注意到，任意整数都可以表示为五个好的数字相加！

所以 $\forall\mathit{ans}\le5$，我们只需要每一位都讨论这五种情况即可。

所以说就是一个记忆化搜索，比较好写。

注意到 $N\le10^{18}$，要开 long long，同时也需要用 map 存记忆的结果。

## 代码

见：<https://atcoder.jp/contests/arc123/submissions/46982307>

谢谢观看！

